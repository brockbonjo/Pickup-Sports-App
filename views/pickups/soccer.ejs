<%- include('../partials/header') %>

<script   src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCJPsnFimaA4YhK6htIku8Cz0gM10FtA1I"> </script>

<main>
  <!-- forEach for all active pickups in sport -->
  <% pickup.forEach(function (p, idx) { %>
  <% console.log(p) %>
  <a href="/show/<%= p._id %>">
  <div class="pickup">
    <div class="rightNew">
      <div class="map">
        <div id="map"></div>
        <script id="map" type="text/javascript">

            var options = {
              zoom: 12,
              center: {lat: <%=p.lat%>, lng: <%=p.lon%> },
              zoomControl: false,
              streetViewControl: false,
              mapTypeControl: false,
            }
            var map<%=idx%> = new google.maps.Map(document.getElementById("map"), options);
            var marker = new google.maps.Marker({
              position: {lat: <%=p.lat%>, lng: <%=p.lon%> },
              map: map<%=idx%>
            })


        </script>
      </div>
    </div>
    <div class="timeStamp">
      Started: <%= p.createdAt %>
    </div>
    <div class="numPlayers">
      <span class="count">Players Joined: <%= p.numOriginalPlayers + p.rsvp.length %></span>
    </div>
  </div>
  </a>
  <% }) %>

</main>


<%- include('../partials/footer') %>
